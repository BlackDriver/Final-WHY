"use strict";window.onload=function(){function e(e){var t=document.querySelector(".today-desc"),n=document.querySelector(".today-maxmin");t.innerHTML=e[d].weather,n.innerHTML=e[d].max_temp+"° / "+e[1].min_temp+"°"}function t(e){var t=[],n=void 0,r=void 0;a.font=30*l+"微软雅黑",a.fillStyle="#fff",a.strokeStyle="#fff",a.lineWidth=5*l,a.lineJoin="round",a.lineCap="round";for(var o=e.length-1;o>=0;o--)t[o]=e[o].max_temp;for(var i=t.length-1;i>=0;i--)n=40+150*i,r=300-2.3*t[i],a.fillText(c[i],(n-20)*l,50*l),a.fillText(e[i].max_temp+"°",(n-20)*l,(r-50)*l),a.fillText(e[i].min_temp+"°",(n-20)*l,(r+50)*l),a.lineTo(n*l,r*l);a.stroke()}function n(e){for(var t=d+1;t<=e.length-1;t++){var n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div");n.className="report",o.className="report-date",a.className="report-icon",i.className="report-tem",o.innerHTML=c[t],i.innerHTML=e[t].max_temp+"° / "+e[t].min_temp+"°",r(e,t,a),n.appendChild(o),n.appendChild(a),n.appendChild(i),m.appendChild(n)}}function r(e,t,n){e[t].weather,"多云"==e[t].weather&&(n.style.backgroundPosition="center center"),"暴雨"==e[t].weather&&(n.style.backgroundPosition="-2.7rem 0"),"冰雹"==e[t].weather&&(n.style.backgroundPosition=3*-1.35+"rem 0"),"沙尘暴"==e[t].weather&&(n.style.backgroundPosition="-6.75rem 0"),"台风"==e[t].weather&&(n.style.backgroundPosition=6*-1.35+"rem 0"),"雾霾"==e[t].weather&&(n.style.backgroundPosition="-5.4rem 0")}var o=document.querySelector(".weather-graphic"),a=o.getContext("2d"),i=parseInt(document.querySelector("html").style.fontSize),l=i/100,c=["周日","周一","周二","周三","周四","周五","周六"],m=document.querySelector(".weather-report"),d=(new Date).getDay();Ajax.get("/weather").then(function(r){e(r=JSON.parse(r)),t(r),n(r)}),o.width=10*i,o.height=3.7*i,function(){var e=(new Date).getHours(),t=document.querySelector(".main-container");console.log(e),t.style.backgroundImage=e>=6&&e<=19?"url('../../images/day.jpg')":"url('../../images/night.jpg')"}()};